# TROUBLESHOOTING.md

## –ß–∞—Å—Ç—ã–µ –æ—à–∏–±–∫–∏ –∏ —Å–ø–æ—Å–æ–±—ã –∏—Ö —É—Å—Ç—Ä–∞–Ω–µ–Ω–∏—è

### 1. –û—à–∏–±–∫–∞ 404 / 405 –Ω–∞ API

**–°–∏–º–ø—Ç–æ–º—ã:**

- –í dev: –∑–∞–ø—Ä–æ—Å—ã –Ω–∞ `/api/*` –ø–∞–¥–∞—é—Ç 404.
- –í prod: –∞–¥—Ä–µ—Å–∞ –ø—Ä–µ–≤—Ä–∞—â–∞—é—Ç—Å—è –≤ `/api/api/*` –∏–ª–∏ —Ç–µ—Ä—è—é—Ç —Å–µ–≥–º–µ–Ω—Ç `/dtj/nsi`.

**–ü—Ä–æ–≤–µ—Ä–∫–∏:**

1. –í `.env.local` –ø—Ä–æ–≤–µ—Ä—å:
   - `VITE_API_BASE` **–±–µ–∑ –∑–∞–≤–µ—Ä—à–∞—é—â–µ–≥–æ `/`**.
   - `VITE_API_DEV_PROXY_BASE` –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å `/` –∏ —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å —Ç–µ–º, –∫–∞–∫ —Ñ—Ä–æ–Ω—Ç —Ö–æ–¥–∏—Ç (–æ–±—ã—á–Ω–æ `/api`).
   - `VITE_RPC_PATH` –∑–∞–¥–∞–Ω –∏ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å `/` (—á–∞—Å—Ç–æ `/api`).
2. –í dev:
   - –û—Ç–∫—Ä–æ–π –≤–∫–ª–∞–¥–∫—É **Network** –≤ –±—Ä–∞—É–∑–µ—Ä–µ: –∑–∞–ø—Ä–æ—Å—ã –¥–æ–ª–∂–Ω—ã –∏–¥—Ç–∏ –Ω–∞ `http://localhost:5173/api/...` –∏ –ø—Ä–æ–∫—Å–∏—Ä–æ–≤–∞—Ç—å—Å—è Vite –Ω–∞ `VITE_API_BASE`.
   - –ï—Å–ª–∏ –∑–∞–ø—Ä–æ—Å —É—à—ë–ª –Ω–∞–ø—Ä—è–º—É—é –Ω–∞ —á—É–∂–æ–π —Ö–æ—Å—Ç –∏ –ø–æ–π–º–∞–ª CORS ‚Üí –ø—Ä–æ–∫—Å–∏ –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–ª.
3. –í prod (`npm run build && npm run preview`):
   - axios –¥–æ–ª–∂–µ–Ω —Ö–æ–¥–∏—Ç—å –Ω–∞–ø—Ä—è–º—É—é –Ω–∞ `VITE_API_BASE`.
   - –ï—Å–ª–∏ –≤–∏–¥–∏—à—å `.../api/api` ‚Äî —É–±–µ—Ä–∏ –ª–∏—à–Ω–∏–π `/api` –∏–∑ `VITE_API_BASE`.

---

### 2. CORS –≤ dev

**–°–∏–º–ø—Ç–æ–º—ã:** –±—Ä–∞—É–∑–µ—Ä –±–ª–æ–∫–∏—Ä—É–µ—Ç –∑–∞–ø—Ä–æ—Å—ã, –ø–∏—à–µ—Ç `CORS error` –≤ –∫–æ–Ω—Å–æ–ª–∏.

**–ü—Ä–∏—á–∏–Ω–∞:** `VITE_API_BASE` —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ –¥—Ä—É–≥–æ–π origin, –∞ `VITE_API_DEV_PROXY_BASE` –Ω–µ —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å –ø—É—Ç—ë–º —Ñ—Ä–æ–Ω—Ç–∞.

**–†–µ—à–µ–Ω–∏–µ:**

- –í–µ—Ä–Ω–∏ `VITE_API_DEV_PROXY_BASE=/api`.
- –£–±–µ–¥–∏—Å—å, —á—Ç–æ –∑–∞–ø—Ä–æ—Å—ã –≤ –∫–æ–¥–µ —Ç–æ–∂–µ –∏–¥—É—Ç –Ω–∞ `/api/...`.
- –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏ `npm run dev`.

---

### 3. –û—à–∏–±–∫–∞ –ª–æ–≥–∏–Ω–∞

**–°–∏–º–ø—Ç–æ–º—ã:**

- –ü–æ—Å–ª–µ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Ñ–æ—Ä–º—ã –ª–æ–≥–∏–Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏–µ ¬´–û—à–∏–±–∫–∞ –≤—Ö–æ–¥–∞¬ª –∏–ª–∏ –ø—É—Å—Ç–æ–π –æ—Ç–≤–µ—Ç.

**–ü—Ä–æ–≤–µ—Ä–∫–∏:**

1. –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è `VITE_AUTH_LOGIN_PATH` (–≤ `.env.local`) –¥–æ–ª–∂–Ω–∞ –Ω–∞—á–∏–Ω–∞—Ç—å—Å—è —Å `/`.
   - –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é: `/auth/login`.
   - –ï—Å–ª–∏ —Å–µ—Ä–≤–µ—Ä –∂–¥—ë—Ç –ª–æ–≥–∏–Ω –≤–Ω—É—Ç—Ä–∏ API, —É–∫–∞–∂–∏ `/api/auth/login` –∏–ª–∏ `/dtj/nsi/api/auth/login`.
2. –ü—Ä–æ–≤–µ—Ä—å –æ—Ç–≤–µ—Ç –±—ç–∫–µ–Ω–¥–∞: –≤ —Ç–µ–∫—É—â–µ–º –∫–æ–¥–µ login –∂–¥—ë—Ç —Ç–µ–∫—Å—Ç–æ–≤–æ–µ `"ok"`.
   - –ï—Å–ª–∏ —Å–µ—Ä–≤–µ—Ä –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç JSON ‚Üí –ø–æ–ø—Ä–∞–≤—å –±—ç–∫–µ–Ω–¥ –∏–ª–∏ –∞–¥–∞–ø—Ç–µ—Ä –ª–æ–≥–∏–Ω–∞.

---

### 4. RPC –ø–∞–¥–∞–µ—Ç —Å –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–º –º–µ—Ç–æ–¥–æ–º

**–°–∏–º–ø—Ç–æ–º—ã:** –ø—Ä–∏ –≤—ã–∑–æ–≤–µ —Ñ—É–Ω–∫—Ü–∏–π –≤–∏–¥–∞ `rpc('loadTypesObjects', {...})` –ø—Ä–∏—Ö–æ–¥–∏—Ç –æ—à–∏–±–∫–∞ ¬´unknown method¬ª.

**–ü—Ä–∏—á–∏–Ω–∞:** `VITE_RPC_PATH` —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–µ —Ç—É–¥–∞.

**–†–µ—à–µ–Ω–∏–µ:**

- –í dev: –æ—Å—Ç–∞–≤—å `VITE_RPC_PATH=/api`.
- –í prod: —É–±–µ–¥–∏—Å—å, —á—Ç–æ `VITE_API_BASE` + `VITE_RPC_PATH` —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å —Ä–µ–∞–ª—å–Ω—ã–º RPC-—ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–º.

---

### 5. Failed to resolve import

**–°–∏–º–ø—Ç–æ–º—ã:** –±–µ–ª—ã–π —ç–∫—Ä–∞–Ω, –≤ –∫–æ–Ω—Å–æ–ª–∏ –æ—à–∏–±–∫–∞ `Failed to resolve import "..."`.

**–ü—Ä–æ–≤–µ—Ä–∫–∏:**

- –°–≤–µ—Ä—å alias –≤ `vite.config.ts` (—Ä–∞–∑–¥–µ–ª `resolve.alias`).
- –£–±–µ–¥–∏—Å—å, —á—Ç–æ –∏–º–ø–æ—Ä—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—à—å –ø—Ä–∞–≤–∏–ª—å–Ω–æ, –Ω–∞–ø—Ä–∏–º–µ—Ä:
  ```ts
  import { api } from '@shared/api'
  ```
- –ï—Å–ª–∏ –∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ—à—å –ø–∞–ø–∫—É ‚Äî –ø—Ä–æ–≤–µ—Ä—å, —á—Ç–æ –≤–Ω—É—Ç—Ä–∏ –µ—Å—Ç—å `index.ts` (barrel-—Ñ–∞–π–ª).

---

### 6. –ë–µ–ª—ã–π —ç–∫—Ä–∞–Ω –±–µ–∑ –æ—à–∏–±–æ–∫

**–°–∏–º–ø—Ç–æ–º—ã:** –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã ‚Äî –ø—É—Å—Ç–æ–π —ç–∫—Ä–∞–Ω.

**–ü—Ä–æ–≤–µ—Ä–∫–∏:**

1. –ö–æ–Ω—Å–æ–ª—å DevTools: –Ω–µ—Ç –ª–∏ –æ—à–∏–±–æ–∫ Vue (–Ω–∞–ø—Ä–∏–º–µ—Ä, –Ω–µ –Ω–∞–π–¥–µ–Ω –∫–æ–º–ø–æ–Ω–µ–Ω—Ç).
2. Network: –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –ª–∏ –¥–∞–Ω–Ω—ã–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `/api/data/loadTypesObjects`).
3. –ü–æ—Å–ª–µ –º—É—Ç–∞—Ü–∏–∏ (create/update/delete) ‚Äî –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –ª–∏ –∫—ç—à Vue Query (–∏–Ω–∞—á–µ UI –Ω–µ –ø–µ—Ä–µ—Ä–∏—Å—É–µ—Ç—Å—è).

---

### 7. –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

- **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å baseURL:** –≤ `src/shared/api/httpClient.ts` –ø–æ—Å–º–æ—Ç—Ä–∏ `resolveBaseURL()`.
- **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å login:** –≤ `src/features/auth/model/login.ts` —É–±–µ–¥–∏—Å—å, —á—Ç–æ –ø—É—Ç—å —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å `.env`.
- **–õ–æ–≥–∏ Vite:** –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ `npm run dev` –≤ –∫–æ–Ω—Å–æ–ª–∏ –≤–∏–¥–Ω–æ, –∫—É–¥–∞ –ø—Ä–æ–∫—Å–∏—Ä—É—é—Ç—Å—è –∑–∞–ø—Ä–æ—Å—ã `/api`.
- **Network ‚Üí Headers:** —Å–º–æ—Ç—Ä–∏ `Request URL` –∏ `Response`.

---

üìå –°–æ–≤–µ—Ç: –¥–µ—Ä–∂–∏ –ø–æ–¥ —Ä—É–∫–æ–π `.env.example`, —á—Ç–æ–±—ã –±—ã—Å—Ç—Ä–æ –ø–µ—Ä–µ–ø—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ, –∏ —ç—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç, —á—Ç–æ–±—ã –Ω–∞—Ö–æ–¥–∏—Ç—å –∏—Å—Ç–æ—á–Ω–∏–∫ –ø—Ä–æ–±–ª–µ–º.
